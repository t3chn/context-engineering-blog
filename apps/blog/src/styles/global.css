@import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600&family=JetBrains+Mono:wght@400;500;600&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --color-bg: theme('colors.surface.50');
    --color-bg-secondary: theme('colors.white');
    --color-text: theme('colors.surface.900');
    --color-text-secondary: theme('colors.surface.600');
    --color-border: theme('colors.surface.200');
    --color-accent: theme('colors.accent.500');
    --color-accent-hover: theme('colors.accent.600');
  }

  .dark {
    --color-bg: theme('colors.surface.950');
    --color-bg-secondary: theme('colors.surface.900');
    --color-text: theme('colors.surface.50');
    --color-text-secondary: theme('colors.surface.400');
    --color-border: theme('colors.surface.800');
    --color-accent: theme('colors.accent.400');
    --color-accent-hover: theme('colors.accent.300');
  }

  html {
    @apply scroll-smooth;
  }

  body {
    @apply font-sans antialiased;
    @apply bg-[var(--color-bg)] text-[var(--color-text)];
    @apply transition-colors duration-300;
  }

  ::selection {
    @apply bg-accent-500/30;
  }
}

@layer components {
  /* Section markers for Context-First structure */
  .section-marker {
    @apply relative;
  }

  .section-marker::before {
    content: '';
    @apply absolute -left-4 top-0 bottom-0 w-1 rounded-full;
    @apply bg-gradient-to-b from-accent-400 to-accent-600;
    @apply opacity-0 transition-opacity duration-300;
  }

  .section-marker:hover::before {
    @apply opacity-100;
  }

  /* Context layer indicators */
  .context-layer {
    @apply relative pl-4 border-l-2 border-surface-200 dark:border-surface-700;
    @apply transition-all duration-300;
  }

  .context-layer:hover {
    @apply border-accent-400;
  }

  .context-layer[data-layer="problem"] {
    @apply border-l-accent-300;
  }

  .context-layer[data-layer="context"] {
    @apply border-l-accent-400;
  }

  .context-layer[data-layer="solution"] {
    @apply border-l-accent-500;
  }

  .context-layer[data-layer="insight"] {
    @apply border-l-accent-600;
  }

  /* Staggered animations */
  .stagger-1 { animation-delay: 0.1s; }
  .stagger-2 { animation-delay: 0.2s; }
  .stagger-3 { animation-delay: 0.3s; }
  .stagger-4 { animation-delay: 0.4s; }
  .stagger-5 { animation-delay: 0.5s; }

  /* Glass effect for cards */
  .glass {
    @apply bg-white/80 dark:bg-surface-900/80;
    @apply backdrop-blur-sm;
    @apply border border-surface-200/50 dark:border-surface-700/50;
  }

  /* Subtle noise texture overlay */
  .noise::before {
    content: '';
    @apply absolute inset-0 pointer-events-none opacity-[0.015] dark:opacity-[0.03];
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  }
}

@layer components {
  /* Fix: Remove default prose padding from code inside pre blocks */
  /* Tailwind Typography adds padding-inline-start to pre code, which only affects */
  /* the first line since .line elements are inline. This removes that padding. */
  .prose pre code {
    padding: 0 !important;
  }
}

@layer utilities {
  /* Focus styles */
  .focus-ring {
    @apply focus:outline-none focus:ring-2 focus:ring-accent-500 focus:ring-offset-2;
    @apply dark:focus:ring-offset-surface-900;
  }

  /* Gradient text */
  .gradient-text {
    @apply bg-gradient-to-r from-accent-500 to-accent-700 bg-clip-text text-transparent;
  }

  /* Scrollbar styling */
  .custom-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: theme('colors.surface.300') transparent;
  }

  .custom-scrollbar::-webkit-scrollbar {
    @apply w-1.5;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    @apply bg-transparent;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    @apply bg-surface-300 dark:bg-surface-600 rounded-full;
  }

  .dark .custom-scrollbar {
    scrollbar-color: theme('colors.surface.600') transparent;
  }
}
